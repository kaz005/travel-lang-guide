# Travel Language Guide

多言語対応の観光スポット情報管理システム。日本語、英語、中国語で観光地情報を提供し、写真や位置情報を含む詳細な情報を管理できます。
また、音声通訳機能と音声読み上げ機能を備えています。

## 主な機能

1. 多言語対応
   - 日本語、英語、中国語での情報提供
   - 言語切り替えによるシームレスな表示

2. 観光スポット情報管理
   - 基本情報（名称、説明）の多言語管理
   - 写真ギャラリー（外部URLまたはローカルファイル）
   - 位置情報（地図表示）

3. インタラクティブな機能
   - 写真カルーセル表示
   - 説明文の音声読み上げ（画像クリックで再生）
   - リアルタイム音声通訳（OpenAI Whisper API使用）

4. 管理機能
   - スポット情報の追加・編集・削除
   - 画像の管理（外部URL/ローカルファイル対応）
   - 多言語コンテンツの一括管理

## 必要要件

- Python 3.11以上
- 仮想環境（venv）
- OpenAI API Key（音声認識・翻訳機能用）

## セットアップ手順

1. リポジトリのクローン
```bash
git clone [repository-url]
cd travel-lang-guide
```

2. 仮想環境の作成と有効化
```bash
python -m venv venv
source venv/bin/activate  # macOSまたはLinux
# または
.\venv\Scripts\activate  # Windows
```

3. 依存パッケージのインストール
```bash
pip install -r requirements.txt
```

4. 環境変数の設定
`.env`ファイルを作成し、以下の内容を設定：
```
OPENAI_API_KEY=your_api_key_here
```

5. 静的ファイルディレクトリの作成
```bash
mkdir -p static/images static/audio_cache
```

## 主要な依存パッケージ

現在のバージョン：
- fastapi==0.104.1
- uvicorn[standard]==0.24.0
- openai==1.57.2
- python-dotenv==1.0.0
- python-multipart==0.0.6
- pydantic==2.5.1
- SQLAlchemy==2.0.36
- Jinja2==3.1.2
- soundfile==0.12.1
- websockets==12.0

## アプリケーションの起動

1. 仮想環境の有効化
```bash
source venv/bin/activate  # macOSまたはLinux
# または
.\venv\Scripts\activate  # Windows
```

2. サーバーの起動
```bash
uvicorn app:app --reload
```

3. アクセス
- メインサイト: http://127.0.0.1:8000
- 管理ダッシュボード: http://127.0.0.1:8000/admin/dashboard
- 地図表示: http://127.0.0.1:8000/map

## 使用方法

### 観光スポット閲覧
1. メインページで各スポットの概要を確認
2. 詳細ページで写真や説明を閲覧
3. 画像をクリックして説明文の音声読み上げ
4. 左右の矢印で写真をめくり表示

### 音声通訳機能
1. ナビゲーションバーの「通訳開始」ボタンをクリック
2. マイクボタンを押しながら話す
3. 自動で言語を検出し、選択した言語に翻訳
4. 翻訳結果を音声で再生

### 管理ダッシュボード
1. スポットの追加
   - 基本情報の入力（3言語）
   - 画像の追加（外部URL/ローカルファイル）
   - 位置情報の設定

2. スポットの編集
   - 既存情報の更新
   - 画像の追加・削除
   - キャプションと説明文の編集

## トラブルシューティング

1. サーバー起動エラー
- 仮想環境が有効化されているか確認
- 必要なパッケージが全てインストールされているか確認
- 正しいPythonバージョンを使用しているか確認

2. 音声機能エラー
- OpenAI APIキーが正しく設定されているか確認
- インターネット接続を確認
- WebSocketライブラリが正しくインストールされているか確認

3. 画像表示エラー
- static/imagesディレクトリが存在するか確認
- ファイルパスが正しいか確認
- ファイル権限が適切か確認

4. 音声キャッシュエラー
- static/audio_cacheディレクトリが存在するか確認
- ディレクトリの書き込み権限を確認
